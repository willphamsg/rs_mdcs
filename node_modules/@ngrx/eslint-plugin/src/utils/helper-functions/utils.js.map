{"version":3,"file":"utils.js","sourceRoot":"","sources":["../../../../../../modules/eslint-plugin/src/utils/helper-functions/utils.ts"],"names":[],"mappings":"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","sourcesContent":["import type { TSESLint, TSESTree } from '@typescript-eslint/utils';\nimport { ASTUtils } from '@typescript-eslint/utils';\nimport {\n  isCallExpression,\n  isIdentifier,\n  isIdentifierOrMemberExpression,\n  isImportDeclaration,\n  isImportDefaultSpecifier,\n  isImportNamespaceSpecifier,\n  isImportSpecifier,\n  isLiteral,\n  isMethodDefinition,\n  isProgram,\n  isProperty,\n  isPropertyDefinition,\n  isTSTypeAnnotation,\n  isTSTypeReference,\n  isTemplateElement,\n  isTemplateLiteral,\n  isTSInstantiationExpression,\n} from './guards';\nimport { NGRX_MODULE_PATHS } from './ngrx-modules';\n\ntype ConstructorFunctionExpression = TSESTree.FunctionExpression & {\n  parent: TSESTree.MethodDefinition & { kind: 'constructor' };\n};\ntype InjectedParameter = TSESTree.Identifier & {\n  typeAnnotation: TSESTree.TSTypeAnnotation;\n  parent:\n    | ConstructorFunctionExpression\n    | (TSESTree.TSParameterProperty & {\n        parent: ConstructorFunctionExpression;\n      })\n    | TSESTree.PropertyDefinition;\n};\ntype InjectedParameterWithSourceCode = Readonly<{\n  identifiers?: readonly InjectedParameter[];\n  sourceCode: Readonly<TSESLint.SourceCode>;\n}>;\n\nexport function getNearestUpperNodeFrom<T extends TSESTree.Node>(\n  { parent }: TSESTree.Node,\n  predicate: (parent: TSESTree.Node) => parent is T\n): T | undefined {\n  while (parent && !isProgram(parent)) {\n    if (predicate(parent)) {\n      return parent;\n    }\n\n    parent = parent.parent;\n  }\n\n  return undefined;\n}\n\nexport function getImportDeclarationSpecifier(\n  importDeclarations: readonly TSESTree.ImportDeclaration[],\n  importName: string\n) {\n  for (const importDeclaration of importDeclarations) {\n    const importSpecifier = importDeclaration.specifiers.find(\n      (importClause): importClause is TSESTree.ImportSpecifier => {\n        return (\n          isImportSpecifier(importClause) &&\n          isIdentifier(importClause.imported) &&\n          importClause.imported.name === importName\n        );\n      }\n    );\n\n    if (importSpecifier) {\n      return { importDeclaration, importSpecifier } as const;\n    }\n  }\n\n  return undefined;\n}\n\nexport function getImportDeclarations(\n  node: TSESTree.Node,\n  moduleName: string\n): readonly TSESTree.ImportDeclaration[] | undefined {\n  let parentNode: TSESTree.Node | undefined = node;\n\n  while (parentNode && !isProgram(parentNode)) {\n    parentNode = parentNode.parent;\n  }\n\n  return parentNode?.body.filter((node): node is TSESTree.ImportDeclaration => {\n    return isImportDeclaration(node) && node.source.value === moduleName;\n  });\n}\n\nfunction getCorrespondentImportClause(\n  importDeclarations: readonly TSESTree.ImportDeclaration[],\n  compatibleWithTypeOnlyImport = false\n) {\n  let importClause: TSESTree.ImportClause | undefined;\n\n  for (const { importKind, specifiers } of importDeclarations) {\n    const lastImportSpecifier = getLast(specifiers);\n\n    if (\n      (!compatibleWithTypeOnlyImport && importKind === 'type') ||\n      isImportNamespaceSpecifier(lastImportSpecifier)\n    ) {\n      continue;\n    }\n\n    importClause = lastImportSpecifier;\n  }\n\n  return importClause;\n}\n\nexport function getImportAddFix({\n  compatibleWithTypeOnlyImport = false,\n  fixer,\n  importName,\n  moduleName,\n  node,\n}: {\n  compatibleWithTypeOnlyImport?: boolean;\n  fixer: TSESLint.RuleFixer;\n  importName: string;\n  moduleName: string;\n  node: TSESTree.Node;\n}): TSESLint.RuleFix | TSESLint.RuleFix[] {\n  const fullImport = `import { ${importName} } from '${moduleName}';`;\n  const importDeclarations = getImportDeclarations(node, moduleName);\n\n  if (!importDeclarations?.length) {\n    return fixer.insertTextAfterRange([0, 0], fullImport);\n  }\n\n  const importDeclarationSpecifier = getImportDeclarationSpecifier(\n    importDeclarations,\n    importName\n  );\n\n  if (importDeclarationSpecifier) {\n    return [];\n  }\n\n  const importClause = getCorrespondentImportClause(\n    importDeclarations,\n    compatibleWithTypeOnlyImport\n  );\n\n  if (!importClause) {\n    return fixer.insertTextAfterRange([0, 0], fullImport);\n  }\n\n  const replacementText = isImportDefaultSpecifier(importClause)\n    ? `, { ${importName} }`\n    : `, ${importName}`;\n  return fixer.insertTextAfter(importClause, replacementText);\n}\n\nexport function getImportRemoveFix(\n  sourceCode: Readonly<TSESLint.SourceCode>,\n  importDeclarations: readonly TSESTree.ImportDeclaration[],\n  importedName: string,\n  fixer: TSESLint.RuleFixer\n): TSESLint.RuleFix | TSESLint.RuleFix[] {\n  const { importDeclaration, importSpecifier } =\n    getImportDeclarationSpecifier(importDeclarations, importedName) ?? {};\n\n  if (!importDeclaration || !importSpecifier) {\n    return [];\n  }\n\n  const isFirstImportSpecifier =\n    importDeclaration.specifiers[0] === importSpecifier;\n  const isLastImportSpecifier =\n    getLast(importDeclaration.specifiers) === importSpecifier;\n  const isSingleImportSpecifier =\n    isFirstImportSpecifier && isLastImportSpecifier;\n\n  if (isSingleImportSpecifier) {\n    return fixer.remove(importDeclaration);\n  }\n\n  const tokenAfterImportSpecifier = sourceCode.getTokenAfter(importSpecifier);\n\n  if (isFirstImportSpecifier && tokenAfterImportSpecifier) {\n    return fixer.removeRange([\n      importSpecifier.range[0],\n      tokenAfterImportSpecifier.range[1],\n    ]);\n  }\n\n  const tokenBeforeImportSpecifier = sourceCode.getTokenBefore(importSpecifier);\n\n  if (!tokenBeforeImportSpecifier) {\n    return [];\n  }\n\n  return fixer.removeRange([\n    tokenBeforeImportSpecifier.range[0],\n    importSpecifier.range[1],\n  ]);\n}\n\nexport function getNodeToCommaRemoveFix(\n  sourceCode: Readonly<TSESLint.SourceCode>,\n  fixer: TSESLint.RuleFixer,\n  node: TSESTree.Node\n) {\n  const nextToken = sourceCode.getTokenAfter(node);\n  const isNextTokenComma = nextToken && ASTUtils.isCommaToken(nextToken);\n  return [\n    fixer.remove(node),\n    ...(isNextTokenComma ? [fixer.remove(nextToken)] : []),\n  ] as const;\n}\n\nexport function getInterfaceName(\n  interfaceMember: TSESTree.Identifier | TSESTree.MemberExpression\n): string | undefined {\n  if (isIdentifier(interfaceMember)) {\n    return interfaceMember.name;\n  }\n\n  return isIdentifier(interfaceMember.property)\n    ? interfaceMember.property.name\n    : undefined;\n}\n\nexport function getInterfaces({\n  implements: classImplements,\n}: TSESTree.ClassDeclaration): readonly (\n  | TSESTree.Identifier\n  | TSESTree.MemberExpression\n)[] {\n  return (classImplements ?? [])\n    .map(({ expression }) => expression)\n    .filter(isIdentifierOrMemberExpression);\n}\n\nexport function getInterface(\n  node: TSESTree.ClassDeclaration,\n  interfaceName: string\n): TSESTree.Identifier | TSESTree.MemberExpression | undefined {\n  return getInterfaces(node).find(\n    (interfaceMember) => getInterfaceName(interfaceMember) === interfaceName\n  );\n}\n\nexport function getImplementsSchemaFixer(\n  { id, implements: classImplements }: TSESTree.ClassDeclaration,\n  interfaceName: string\n) {\n  const [implementsNodeReplace, implementsTextReplace] =\n    classImplements && classImplements.length\n      ? [getLast(classImplements), `, ${interfaceName}`]\n      : [id as TSESTree.Identifier, ` implements ${interfaceName}`];\n\n  return { implementsNodeReplace, implementsTextReplace } as const;\n}\n\nexport function getLast<T extends readonly unknown[]>(items: T): T[number] {\n  return items.slice(-1)[0];\n}\n\nexport function getDecoratorName({\n  expression,\n}: TSESTree.Decorator): string | undefined {\n  if (isIdentifier(expression)) {\n    return expression.name;\n  }\n\n  return isCallExpression(expression) && isIdentifier(expression.callee)\n    ? expression.callee.name\n    : undefined;\n}\n\nexport function getRawText(node: TSESTree.Node): string | null {\n  if (isIdentifier(node)) {\n    return node.name;\n  }\n\n  if (\n    isPropertyDefinition(node) ||\n    isMethodDefinition(node) ||\n    isProperty(node)\n  ) {\n    return getRawText(node.key);\n  }\n\n  if (isLiteral(node)) {\n    return node.raw;\n  }\n\n  if (isTemplateElement(node)) {\n    return `\\`${node.value.raw}\\``;\n  }\n\n  if (isTemplateLiteral(node)) {\n    return `\\`${node.quasis[0].value.raw}\\``;\n  }\n\n  return null;\n}\n\nexport function capitalize<T extends string>(text: T): Capitalize<T> {\n  return `${text[0].toUpperCase()}${text.slice(1)}` as Capitalize<T>;\n}\n\nfunction getInjectedParametersWithSourceCode(\n  context: TSESLint.RuleContext<string, readonly unknown[]>,\n  moduleName: string,\n  importName: string\n): InjectedParameterWithSourceCode {\n  const sourceCode = context.sourceCode;\n  const importDeclarations =\n    getImportDeclarations(sourceCode.ast, moduleName) ?? [];\n  const { importSpecifier } =\n    getImportDeclarationSpecifier(importDeclarations, importName) ?? {};\n\n  const injectImportDeclarations =\n    getImportDeclarations(sourceCode.ast, '@angular/core') ?? [];\n\n  const { importSpecifier: injectImportSpecifier } =\n    getImportDeclarationSpecifier(injectImportDeclarations, 'inject') ?? {};\n\n  if (!importSpecifier) {\n    return { sourceCode };\n  }\n\n  const variables = sourceCode.getDeclaredVariables(importSpecifier);\n  const typedVariable = variables.find(({ name }) => name === importName);\n  const identifiers = typedVariable?.references?.reduce<\n    readonly InjectedParameter[]\n  >((identifiers, { identifier: { parent } }) => {\n    if (!parent) {\n      return identifiers;\n    }\n\n    if (\n      isTSTypeReference(parent) &&\n      parent.parent &&\n      isTSTypeAnnotation(parent.parent) &&\n      parent.parent.parent &&\n      isIdentifier(parent.parent.parent)\n    ) {\n      return identifiers.concat(parent.parent.parent as InjectedParameter);\n    }\n\n    const parentToCheck = isTSInstantiationExpression(parent)\n      ? parent.parent\n      : parent;\n\n    if (\n      parentToCheck &&\n      isCallExpression(parentToCheck) &&\n      isIdentifier(parentToCheck.callee) &&\n      parentToCheck.callee.name == 'inject' &&\n      parentToCheck.parent &&\n      isPropertyDefinition(parentToCheck.parent) &&\n      isIdentifier(parentToCheck.parent.key) &&\n      injectImportSpecifier\n    ) {\n      return identifiers.concat(parentToCheck.parent.key as InjectedParameter);\n    }\n\n    return identifiers;\n  }, []);\n  return { identifiers, sourceCode };\n}\n\nexport function getNgRxEffectActions(\n  context: TSESLint.RuleContext<string, readonly unknown[]>\n): InjectedParameterWithSourceCode {\n  return getInjectedParametersWithSourceCode(\n    context,\n    NGRX_MODULE_PATHS.effects,\n    'Actions'\n  );\n}\n\nexport function getNgRxComponentStores(\n  context: TSESLint.RuleContext<string, readonly unknown[]>\n): InjectedParameterWithSourceCode {\n  return getInjectedParametersWithSourceCode(\n    context,\n    NGRX_MODULE_PATHS['component-store'],\n    'ComponentStore'\n  );\n}\n\nexport function getNgRxStores(\n  context: TSESLint.RuleContext<string, readonly unknown[]>\n): InjectedParameterWithSourceCode {\n  return getInjectedParametersWithSourceCode(\n    context,\n    NGRX_MODULE_PATHS.store,\n    'Store'\n  );\n}\n\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions#escaping\nexport function escapeText(text: string): string {\n  return text.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n}\n\nexport function asPattern(identifiers: readonly InjectedParameter[]): RegExp {\n  const escapedNames = identifiers.map(({ name }) => escapeText(name));\n  return new RegExp(`^(${escapedNames.join('|')})$`);\n}\n\nexport function getNgrxComponentStoreNames(\n  context: TSESLint.RuleContext<string, readonly unknown[]>\n): RegExp | null {\n  const { identifiers = [] } = getNgRxComponentStores(context);\n  return identifiers.length > 0 ? asPattern(identifiers) : null;\n}\n"]}