{"version":3,"file":"use-consistent-global-store-name.js","sourceRoot":"","sources":["../../../../../../modules/eslint-plugin/src/rules/store/use-consistent-global-store-name.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,2CAA6B;AAC7B,qDAAgD;AAChD,uCAA4C;AAE/B,QAAA,4BAA4B,GAAG,8BAA8B,CAAC;AAC9D,QAAA,mCAAmC,GAC9C,qCAAqC,CAAC;AAOxC,kBAAe,IAAA,yBAAU,EAAsB;IAC7C,IAAI,EAAE,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC,CAAC,IAAI;IACjC,IAAI,EAAE;QACJ,IAAI,EAAE,YAAY;QAClB,cAAc,EAAE,IAAI;QACpB,IAAI,EAAE;YACJ,WAAW,EAAE,6CAA6C;YAC1D,UAAU,EAAE,OAAO;SACpB;QACD,MAAM,EAAE;YACN;gBACE,IAAI,EAAE,QAAQ;aACf;SACF;QACD,QAAQ,EAAE;YACR,CAAC,oCAA4B,CAAC,EAC5B,oDAAoD;YACtD,CAAC,2CAAmC,CAAC,EAAE,iCAAiC;SACzE;KACF;IACD,cAAc,EAAE,CAAC,OAAO,CAAC;IACzB,MAAM,EAAE,CAAC,OAAO,EAAE,CAAC,SAAS,CAAC,EAAE,EAAE;QAC/B,OAAO;YACL,OAAO;gBACL,MAAM,EAAE,WAAW,GAAG,EAAE,EAAE,GAAG,IAAA,qBAAa,EAAC,OAAO,CAAC,CAAC;gBAEpD,KAAK,MAAM,EAAE,GAAG,EAAE,IAAI,EAAE,KAAK,EAAE,cAAc,EAAE,IAAI,WAAW,EAAE,CAAC;oBAC/D,IAAI,IAAI,KAAK,SAAS,EAAE,CAAC;wBACvB,OAAO;oBACT,CAAC;oBAED,MAAM,IAAI,GAAG,EAAE,SAAS,EAAE,CAAC;oBAC3B,OAAO,CAAC,MAAM,CAAC;wBACb,GAAG,EAAE;4BACH,GAAG,GAAG;4BACN,GAAG,EAAE;gCACH,GAAG,GAAG,CAAC,KAAK;gCACZ,MAAM,EAAE,GAAG,CAAC,KAAK,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM;6BACvC;yBACF;wBACD,SAAS,EAAE,oCAA4B;wBACvC,IAAI;wBACJ,OAAO,EAAE;4BACP;gCACE,SAAS,EAAE,2CAAmC;gCAC9C,IAAI;gCACJ,GAAG,EAAE,CAAC,KAAK,EAAE,EAAE,CACb,KAAK,CAAC,gBAAgB,CACpB,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,cAAc,EAAE,KAAK,CAAC,CAAC,CAAC,IAAI,KAAK,CAAC,CAAC,CAAC,CAAC,EAChD,SAAS,CACV;6BACJ;yBACF;qBACF,CAAC,CAAC;gBACL,CAAC;YACH,CAAC;SACF,CAAC;IACJ,CAAC;CACF,CAAC,CAAC","sourcesContent":["import * as path from 'path';\nimport { createRule } from '../../rule-creator';\nimport { getNgRxStores } from '../../utils';\n\nexport const useConsistentGlobalStoreName = 'useConsistentGlobalStoreName';\nexport const useConsistentGlobalStoreNameSuggest =\n  'useConsistentGlobalStoreNameSuggest';\n\ntype MessageIds =\n  | typeof useConsistentGlobalStoreName\n  | typeof useConsistentGlobalStoreNameSuggest;\ntype Options = readonly [string];\n\nexport default createRule<Options, MessageIds>({\n  name: path.parse(__filename).name,\n  meta: {\n    type: 'suggestion',\n    hasSuggestions: true,\n    docs: {\n      description: 'Use a consistent name for the global store.',\n      ngrxModule: 'store',\n    },\n    schema: [\n      {\n        type: 'string',\n      },\n    ],\n    messages: {\n      [useConsistentGlobalStoreName]:\n        'Global store should be named as `{{ storeName }}`.',\n      [useConsistentGlobalStoreNameSuggest]: 'Rename it to `{{ storeName }}`.',\n    },\n  },\n  defaultOptions: ['store'],\n  create: (context, [storeName]) => {\n    return {\n      Program() {\n        const { identifiers = [] } = getNgRxStores(context);\n\n        for (const { loc, name, range, typeAnnotation } of identifiers) {\n          if (name === storeName) {\n            return;\n          }\n\n          const data = { storeName };\n          context.report({\n            loc: {\n              ...loc,\n              end: {\n                ...loc.start,\n                column: loc.start.column + name.length,\n              },\n            },\n            messageId: useConsistentGlobalStoreName,\n            data,\n            suggest: [\n              {\n                messageId: useConsistentGlobalStoreNameSuggest,\n                data,\n                fix: (fixer) =>\n                  fixer.replaceTextRange(\n                    [range[0], typeAnnotation?.range[0] ?? range[1]],\n                    storeName\n                  ),\n              },\n            ],\n          });\n        }\n      },\n    };\n  },\n});\n"]}